## はじめに
現在の案件でVueを使用したフロントエンド開発を行っています。
その中で画面や機能の増加に伴いVueコンポーネントファイルも大量に増えたため、改めてVueプロジェクトのフォルダ構成を検討することになりました。


検討するにあたり、VueやReactのフォルダ構成について調査を行ったので、その内容や最終的に考えたフォルダ構成について紹介したいと思います。


## 現状のフォルダ構成
現状のVueコンポーネントが格納されているフォルダは下記の通りです。Vueコンポーネントに関する情報のみ抜き出しています。
```
src
├── components　
│    ├── XXXX.vue
│    └── XXXX.vue
|    ︙
├── views // 画面表示のコンポーネント格納
|    ├── Login.vue
|    └── Top.vue
|    ︙
│
└── App.vue // ルートコンポーネント
```
src直下に`views`フォルダと`components`フォルダ、そしてルートコンポーネントのApp.vueがおかれています。  
viewsフォルダ内には各画面を表示するVueコンポーネント(画面コンポーネント)が格納されています。URLのパスごとに作成しているので、画面数分あります。  
componentsフォルダには画面の一部を表示するVueコンポーネント(入力欄やボタン、表など)が格納されています。基本的にviewsフォルダに格納されている画面コンポーネントから呼び出して利用します。

この2種類のフォルダしかないため、画面や機能の増加によりどちらのフォルダ内も大量のVueコンポーネントが格納されています。
そのため、Vueコンポーネント同士の関連性が把握しづらく、どこにどのようなロジックが書かれているかも推測しづらい状況になっています。


## SPAのフォルダ構成の基礎
フォルダ構成を検討する前に、一般的なSPAのフォルダ構成についてお話します。  

まず前提としてSPAのフォルダ構成は、特にこれといった決まりはありません。Reactの公式ドキュメントでは、プロジェクトの状況や開発者の好みに応じて決めることを推奨しており、もし決められないのならば最初のうちは適当でも良いと言っています。([React:ファイル構成](https://ja.reactjs.org/docs/faq-structure.html))

そのような中で、まず多くの現場で使われている考え方として「コンテナコンポーネント」と「プレゼンテーショナルコンポーネント」にコンポーネントを分離する方法があります。  
参考：[Presentational and Container Components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)  
これは上記の記事はReact/Reduxについて書かれていますが、Vue/Vuexにも適用できます。 

各コンポーネントの役割は以下のとおりです。役割的にコンテナコンポーネントが「親」、プレゼンテーショナルコンポーネントが「子」となります。  
`コンテナコンポーネント`
- 状態管理ライブラリ(Redux/Vuex)とやりとりを行う
- コンポーネント内で状態を保持し、状態を変更するためのロジックを持つ
- API通信を行う
- プレゼンテーショナルコンポーネントを利用して構成される
- CSSはプレゼンテーショナルコンポーネントの配置に関することを記述(flexbox、marginなどのレイアウト指定)

`プレゼンテーショナルコンポーネント`
- 基本的にコンテナコンポーネントから渡されたpropsを描画するだけ
- 場合によってはdataを持つことも可（表示非表示フラグなど）
- API通信は行わない
- データ操作のロジックは持たず、変更する場合はContainerコンポーネントに依頼する
- CSSはそのコンポーネント自身に関することのみ(文字の大きさ、色など)


この2つのコンポーネントに分けることで、以下のメリットが挙げられます。
- 画面の見た目を変更するときや、データ構造が変わったりしたときに、修正するファイルが明確になる
- 状態変更の流れが一方向に統一でき(親⇒子)、思わぬバグの発生を防ぐことができる
- プレゼンテーショナルコンポーネントはStorybookなどでUIカタログ化しやすい
- propsから受け取った情報を表示するだけなので、プレゼンテーショナルコンポーネントの共通化がしやすくなる



最近ではReactの[Hooks](https://ja.reactjs.org/docs/hooks-intro.html)やVueの[Composition API](https://v3.ja.vuejs.org/api/composition-api.html)が登場したことで、状態管理ライブラリとのやりとりがしやすくなったり、コンポーネントファイルからロジック処理を別ファイルに分離しやすくなったため、コンテナコンポーネントとプレゼンテーショナルコンポーネントは意識しなくて良いと`[Presentational and Container Components`を執筆した著者が言っていますが、フォルダ構成を考える場合はこの考え方をベースにした方がルール作りがしやすいため今でも用いられることが多いです。

なので今回フォルダ構成を検討する際も、この考え方をベースにしています。


## フォルダ構成の検討にあたり意識したこと
共通化ではなく、責務を分離することを意識。
コンポーネントの共通化がSPAフレームワークの利点として挙げられるが、共通化は難しいことを説明

それとファイルの命名や格納場所に困らないこと。Atomic Design等の説明は下の章で紹介する。
AtomicDesign、、、境目が分かりづらく、量のバラつきが出て結局もう少し粒度を粗くして整理する話もよく聞く。

## 今回検討したフォルダ構成の紹介
### 全体像




### 細かく紹介




## 終わりに

